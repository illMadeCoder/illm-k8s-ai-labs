---
import type { CostEstimate } from '../types';
import { formatCost } from '../lib/format';

interface Props {
  cost: CostEstimate;
}

const { cost } = Astro.props;
const targets = Object.entries(cost.perTarget ?? {});
---

<details class="section">
  <summary class="section-title">Cost Estimate</summary>
  <table>
    <thead>
      <tr>
        <th>Target</th>
        <th>Cost</th>
      </tr>
    </thead>
    <tbody>
      {targets.map(([name, usd]) => (
        <tr>
          <td><code>{name}</code></td>
          <td>{formatCost(usd)}</td>
        </tr>
      ))}
      <tr class="total-row">
        <td>Total</td>
        <td>{formatCost(cost.totalUSD)}</td>
      </tr>
    </tbody>
  </table>
</details>

<style>
  table {
    padding: 0 !important;
  }

  .total-row td {
    border-top: 2px solid var(--border);
    border-bottom: none;
    font-weight: 700;
  }
</style>
