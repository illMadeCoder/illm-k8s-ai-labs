# Istio Ingress Gateway
# ClusterIP service - Tailscale handles external access

# Gateway name
name: istio-ingressgateway

# Explicit image to avoid "auto" placeholder when istiod isn't ready
image:
  repository: docker.io/istio/proxyv2
  tag: 1.24.2

# Homelab-friendly resources
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

# Single replica for homelab
replicaCount: 1
autoscaling:
  enabled: false

# ClusterIP service - Tailscale LoadBalancer service in istio-config
# will route traffic to this
service:
  type: ClusterIP
  ports:
    - name: http2
      port: 80
      targetPort: 8080
    - name: https
      port: 443
      targetPort: 8443

# Pod labels for service selection
labels:
  app: istio-ingressgateway
  istio: ingressgateway
