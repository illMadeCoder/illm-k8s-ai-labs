# Traefik values for hub cluster
#
# Internal reverse proxy exposed via Tailscale.
# Path-based routing to observability services.

# Don't need external LoadBalancer - Tailscale handles external access
service:
  type: ClusterIP

# Resource limits for homelab
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 300m
    memory: 256Mi

# Enable dashboard for debugging
ingressRoute:
  dashboard:
    enabled: true
    matchRule: PathPrefix(`/dashboard`) || PathPrefix(`/api`)
    entryPoints:
      - web

# Entrypoints
ports:
  web:
    port: 8000
    exposedPort: 80
    protocol: TCP
  websecure:
    port: 8443
    exposedPort: 443
    protocol: TCP

# Logs
logs:
  general:
    level: INFO
  access:
    enabled: true

# Enable Kubernetes Ingress provider
providers:
  kubernetesIngress:
    enabled: true
    allowCrossNamespace: true
  kubernetesCRD:
    enabled: true
    allowCrossNamespace: true

# Don't redirect HTTP to HTTPS (Tailscale handles TLS)
globalArguments: []
