apiVersion: experiments.illm.io/v1alpha1
kind: Experiment
metadata:
  name: http-baseline
  namespace: experiments
spec:
  description: "HTTP baseline - simple app with load generation for benchmarking"
  ttlDays: 1

  targets:
    - name: app
      cluster:
        type: vcluster
      components:
        - app: hello-app

    - name: loadgen
      cluster:
        type: hub
      components:
        - workflow: k6-http-loadgen
          params:
            targetUrl: "http://hello-app.http-baseline.svc:8080"
            users: "10"
            duration: "120s"
      depends:
        - app

  workflow:
    template: http-baseline-validation
    completion:
      mode: workflow
